{{- if (eq .chezmoi.os "darwin") -}}
#!/bin/bash

# Make brew a requirement prior to run this
# Not including it because of the differences between M1 and Intel macs
if ! command -v brew &> /dev/null
then
  echo "

#################################################
Ya need homebrew ya dinges!!
Install it here: https://brew.sh/

BEFORE YOU DO THAT, clear the state of this one-time script so you can re-run this:
chezmoi state delete-bucket --bucket=scriptState
#################################################

"
  return 1 2>/dev/null || exit 1
fi

# Continue as normal
echo "Installing packages and some apps"
brew bundle --no-lock --file=/dev/stdin <<EOF
tap "homebrew/bundle"
tap "homebrew/cask"
tap "homebrew/core"
tap "homebrew/services"
brew "asciiquarium"
brew "asdf"
brew "bat"
brew "chezmoi"
brew "coreutils"
brew "curl"
brew "fd"
brew "gcc"
brew "git"
brew "jq"
brew "lazygit"
brew "lf"
brew "libyaml"
brew "luajit", args: ["HEAD"]
brew "luarocks"
brew "neovim"
brew "ripgrep"
brew "the_silver_searcher"
brew "tmux"
brew "tree"
brew "universal-ctags"
brew "wget"
brew "zellij"
brew "zsh"
cask "alacritty"
cask "alfred"
cask "beekeeper-studio"
cask "chromedriver"
cask "discord"
cask "flux"
cask "licecap"
cask "ngrok"
cask "rectangle"
cask "visual-studio-code"
EOF

echo "

#################################################
Packages and apps installed!

If there are problems with the setup or script:
JOT THE PROBLEM DOWN IN YOUR TODO APP!!!!!
Before you forget.
Your future and past selves thank you.
#################################################

"
{{ end -}}
